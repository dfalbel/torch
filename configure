#!/bin/bash
# Shell config script

LIBTORCH="/usr/local/lib/libtorch"

PKG_CFLAGS="-I$LIBTORCH/include -I/$LIBTORCH/include/torch/csrc/api/include"
PKG_LIBS="-L$LIBTORCH/lib -Wl,-rpath,$LIBTORCH/lib -ltorch"

# uncomment to install torch with CUDA support
#LIBCUDA="/usr/local/cuda-9.0"
#PKG_LIBS="-L$LIBTORCH/lib -Wl,-rpath,$LIBTORCH/lib -ltorch -L/$LIBCUDA/lib -lnvrtc -lcuda"

echo "Using PKG_LIBS=$PKG_LIBS"
echo "Using PKG_CFLAGS=$PKG_CFLAGS"

# Write to Makevars
sed -e "s|@pkg_cflags@|$PKG_CFLAGS|" -e "s|@libs@|$PKG_LIBS|" src/Makevars.in > src/Makevars

exit 0
